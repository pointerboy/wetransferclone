{% extends "base.html" %}

{% block title %}Preuzmi Fajlove{% endblock %}

{% block content %}
<div class="container">
    <h2>Vaši fajlovi su spremni</h2>
    
    <div class="download-info">
        <div class="info-item">
            <span class="info-label">Datum otpremanja:</span>
            <span class="info-value">{{ upload_date }}</span>
        </div>
        <div class="info-item">
            <span class="info-label">Ističe:</span>
            <span class="info-value">{{ expiry_date }}</span>
        </div>
        <div class="info-item">
            <span class="info-label">Preostalo vreme:</span>
            <span class="info-value">{{ days_left }} dan{{ "a" if days_left != 1 else "" }}</span>
        </div>
    </div>
    
    <a href="#" id="downloadAllButton" class="download-all-button">
        <span class="button-icon">⬇️</span>
        <span class="button-text">Preuzmi sve fajlove</span>
    </a>
    
    <div id="downloadProgress" class="download-progress">
        <div class="progress-bar">
            <div id="progressFill" class="progress-fill"></div>
        </div>
        <div id="progressText" class="progress-text">Pripremam preuzimanje...</div>
    </div>
    
    <div class="files-list">
        {% for file in files %}
        <div class="file-item">
            <div class="file-info">
                <div class="file-name">{{ file.filename }}</div>
                <div class="file-size">{{ file.size_formatted }}</div>
            </div>
            <a href="{{ file.download_url }}" class="download-button">
                <span class="button-icon">⬇️</span>
                <span class="button-text">Preuzmi</span>
            </a>
        </div>
        {% endfor %}
    </div>
    
    <a href="/" class="back-link">
        <span class="button-icon">⬅️</span>
        <span class="button-text">Otpremi još fajlova</span>
    </a>
</div>
{% endblock %}

{% block extra_js %}
<script>
    window.downloadFiles = {{ files|tojson|safe }};
</script>
<script src="{{ url_for('static', path='js/download.js') }}"></script>
{% endblock %} 